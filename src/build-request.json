{
  "kind": "build_request",
  "title": "Show discontinued medications in a separate table on the resident medication list",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Update the resident medications UI to display active medications and discontinued medications in separate, clearly labeled tables/sections (do not use strikethrough/crossed-out styling for discontinued medications).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "recent-messages"
        ],
        "quotes": [
          "allow showing discontinued medications in resident's list of medications in separate table instead of crossing them out"
        ]
      },
      "acceptanceCriteria": [
        "In the resident medications view, medications with isActive=true are shown under a 'Current Medications' (or 'Active Medications') section/table.",
        "Medications with isActive=false are shown under a separate 'Discontinued Medications' section/table on the same screen.",
        "Discontinued medications are not rendered with crossed-out/strikethrough styles; they are visually separated by the discontinued section/table instead.",
        "If there are no discontinued medications, the discontinued section/table is either hidden or shows an appropriate empty-state message (e.g., 'No discontinued medications').",
        "Existing actions remain sensible: discontinue/edit actions are only available for active medications (as they are today), and discontinued medications are view-only."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Ensure the resident profile page Medications tab also shows discontinued medications in a separate section/table (currently it only lists active medications).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "recent-messages"
        ],
        "quotes": [
          "allow showing discontinued medications in resident's list of medications in separate table instead of crossing them out"
        ]
      },
      "acceptanceCriteria": [
        "On ResidentProfilePage, the Medications tab lists active medications in the current section and additionally lists discontinued medications in a separate section/table below (or otherwise clearly separated).",
        "When a medication is discontinued, it no longer appears in the active section and appears in the discontinued section after data refresh (React Query invalidation already in place)."
      ]
    }
  ],
  "constraints": [
    "Do not modify immutable frontend paths: frontend/src/hooks/useInternetIdentity.ts, frontend/src/hooks/useInternetIdentity.tsx, frontend/src/hooks/useActor.ts, frontend/src/main.tsx, frontend/src/components/ui.",
    "Backend must remain a single Motoko actor in backend/main.mo; only add migration code if state shape changes (not expected for this request)."
  ],
  "nonGoals": [
    "Adding new medication lifecycle states beyond the existing Medication.isActive boolean.",
    "Implementing medication history metadata (e.g., discontinue reason/date) beyond what is currently stored."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}